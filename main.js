var config = {
    apiKey: "AIzaSyA1sf5JPIRkH9MEMjjZ0zcLvuYw3svfWps",
    authDomain: "bias-study.firebaseapp.com",
    databaseURL: "https://bias-study.firebaseio.com",
    storageBucket: "bias-study.appspot.com",
    messagingSenderId: "452394401835"
};

firebase.initializeApp(config);

// connect to db
var database = firebase.database();

if(!localStorage.getItem("userId")) {
	localStorage.setItem("userId", Math.floor(Math.random() * 10e7).toString());
}

// user id defined namespace
// https://bias-study.firebaseio.com/logs/$userId
var userId = localStorage.getItem("userId");
var newLog = database.ref("logs").child(userId);

console.log("ID:", userId);

var amountErrorValues = [1, 100, 200, 500, 1000];

//Generate all permutations of the visualization order, select by userID (which is effectively "random")
var cond = pseudo_random('condition') % 3;
var studyCondition = cond === 0 ? 'difference' : (cond === 1 ? 'both' : 'onlyNew');
var presentationOrder = pseudo_random('presentation_order') % 2 == 0 ? ['states', 'airline'] : ['airline', 'states'];

function getError(visualizationLookingAt) {
    return amountErrorValues[pseudo_random(visualizationLookingAt + 'AmountError') % amountErrorValues.length];
}

function getSequence(visualizationLookingAt) {
    return 1 + pseudo_random(visualizationLookingAt + 'SequenceNumber') % 20;
}

console.log("condition:", studyCondition);
console.log("order:", presentationOrder);
console.log("error airline:", getError('airline'));
console.log("error states:", getError('states'));
console.log("seq airline:", getSequence('airline'));
console.log("seq states:", getSequence('states'));

newLog.child('firstCondition').set(presentationOrder[0]);
newLog.child('secondCondition').set(presentationOrder[1]);

// all airlines or states
var selectOptions = {
    'airline': ['American', 'Delta', 'ExpressJet', 'Hawaiian', 'JetBlue', 'SkyWest', 'Spirit', 'Southwest', 'United', 'Virgin'],
    'states': ['Arizona', 'California', 'Colorado', 'Florida', 'Georgia', 'Illinois', 'Nevada', 'New York', 'Texas', 'Washington']
};

// the actual data
var airlinesData = {"1000_15": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "1000_10": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "1000_6": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "10_15": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "1000_16": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "100_6": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "1000_17": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "100_19": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "100_10": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "200_11": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "10_2": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "500_20": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "10_14": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "200_10": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "10_18": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "100_11": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "10_11": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "500_12": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "200_7": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "1000_2": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "500_18": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "10_17": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "500_9": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "1000_19": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "200_4": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "500_15": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "200_6": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "10_12": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "100_12": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "200_8": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "1000_20": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "500_16": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "100_14": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "200_2": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "1000_7": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "500_19": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "200_5": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "10_19": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "100_2": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "200_19": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "10_20": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "500_11": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "10_5": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "200_21": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "10_9": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "500_6": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "500_5": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "100_5": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "100_4": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "500_7": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "200_18": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "200_16": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "500_21": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "10_4": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "200_13": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "1000_8": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "500_10": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "10_8": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "10_16": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "200_3": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "500_17": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "200_14": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "100_18": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "10_13": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "10_3": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "200_9": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "500_3": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "500_4": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "500_8": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "1_1": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "200_15": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "10_10": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "1000_21": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "100_16": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "100_3": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "10_6": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "200_20": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "1000_11": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "500_13": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "100_8": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "100_7": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "100_9": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "500_2": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "1000_13": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "1_0": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "100_21": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "1000_3": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "500_14": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "10_21": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "100_17": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "1000_5": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "1000_12": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "200_17": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "1000_4": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "200_12": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "100_13": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "1000_9": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "100_15": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "1000_18": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "100_20": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "10_7": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}, "1000_14": {"DL": 5163, "B6": 5113, "VX": 153, "EV": 1998, "AA": 4088, "UA": 583, "WN": 2155}}

var statesData = {"1000_15": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "1000_10": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "1000_6": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "10_15": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "1000_16": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "100_6": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "1000_17": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "100_19": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "100_10": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "200_11": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "10_2": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "500_20": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "10_14": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "200_10": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "10_18": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "100_11": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "10_11": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "500_12": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "200_7": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "1000_2": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "500_18": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "10_17": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "500_9": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "1000_19": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "200_4": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "500_15": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "200_6": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "10_12": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "100_12": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "200_8": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "1000_20": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "500_16": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "100_14": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "200_2": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "1000_7": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "500_19": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "200_5": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "10_19": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "100_2": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "200_19": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "10_20": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "500_11": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "10_5": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "200_21": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "10_9": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "500_6": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "500_5": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "100_5": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "100_4": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "500_7": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "200_18": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "200_16": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "500_21": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "10_4": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "200_13": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "1000_8": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "500_10": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "10_8": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "10_16": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "200_3": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "500_17": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "200_14": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "100_18": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "10_13": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "10_3": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "200_9": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "500_3": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "500_4": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "500_8": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "1_1": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "200_15": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "10_10": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "1000_21": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "100_16": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "100_3": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "10_6": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "200_20": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "1000_11": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "500_13": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "100_8": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "100_7": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "100_9": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "500_2": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "1000_13": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "1_0": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "100_21": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "1000_3": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "500_14": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "10_21": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "100_17": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "1000_5": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "1000_12": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "200_17": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "1000_4": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "200_12": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "100_13": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "1000_9": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "100_15": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "1000_18": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "100_20": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "10_7": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}, "1000_14": {"NJ": 327, "PR": 950, "FL": 4986, "CA": 1887, "NY": 5085, "VA": 961, "MA": 3928}}

CARRIER_NAMES = {
    'WN': 'Southwest Airlines',
    'AA': 'American Airlines',
    'DL': 'Delta Air Lines',
    'UA': 'United Airlines',
    'OO': 'SkyWest Airlines',
    'EV': 'ExpressJet',
    'B6': 'JetBlue',
    'AS': 'Alaska Airlines',
    'NK': 'Spirit Airlines',
    'F9': 'Frontier Airlines',
    'VX': 'Virgin America',
    'HA': 'Hawaiian Airlines'
}

STATE_NAMES = {
    'AK': 'Alaska',
    'AL': 'Alabama',
    'AR': 'Arkansas',
    'AS': 'American Samoa',
    'AZ': 'Arizona',
    'CA': 'California',
    'CO': 'Colorado',
    'CT': 'Connecticut',
    'DC': 'District of Columbia',
    'DE': 'Delaware',
    'FL': 'Florida',
    'GA': 'Georgia',
    'GU': 'Guam',
    'HI': 'Hawaii',
    'IA': 'Iowa',
    'ID': 'Idaho',
    'IL': 'Illinois',
    'IN': 'Indiana',
    'KS': 'Kansas',
    'KY': 'Kentucky',
    'LA': 'Louisiana',
    'MA': 'Massachusetts',
    'MD': 'Maryland',
    'ME': 'Maine',
    'MI': 'Michigan',
    'MN': 'Minnesota',
    'MO': 'Missouri',
    'MP': 'Northern Mariana Islands',
    'MS': 'Mississippi',
    'MT': 'Montana',
    'NA': 'National',
    'NC': 'North Carolina',
    'ND': 'North Dakota',
    'NE': 'Nebraska',
    'NH': 'New Hampshire',
    'NJ': 'New Jersey',
    'NM': 'New Mexico',
    'NV': 'Nevada',
    'NY': 'New York',
    'OH': 'Ohio',
    'OK': 'Oklahoma',
    'OR': 'Oregon',
    'PA': 'Pennsylvania',
    'PR': 'Puerto Rico',
    'RI': 'Rhode Island',
    'SC': 'South Carolina',
    'SD': 'South Dakota',
    'TN': 'Tennessee',
    'TX': 'Texas',
    'UT': 'Utah',
    'VA': 'Virginia',
    'VI': 'Virgin Islands',
    'VT': 'Vermont',
    'WA': 'Washington',
    'WI': 'Wisconsin',
    'WV': 'West Virginia',
    'WY': 'Wyoming'
}

function getSelectOptions(visualizationLookingAt) {
    var amountError = getError(visualizationLookingAt);
    var sequenceNumber = getSequence(visualizationLookingAt);

    var key = "" + amountError + "_" + sequenceNumber;
    if (visualizationLookingAt === 'airline') {
        return airlinesData[key];
    } else {
        return statesData[key];
    }
}

function makeCRCTable(){
    var c;
    var crcTable = [];
    for(var n =0; n < 256; n++){
        c = n;
        for(var k =0; k < 8; k++){
            c = ((c&1) ? (0xEDB88320 ^ (c >>> 1)) : (c >>> 1));
        }
        crcTable[n] = c;
    }
    return crcTable;
}

function crc32(str) {
    var crcTable = window.crcTable || (window.crcTable = makeCRCTable());
    var crc = 0 ^ (-1);

    for (var i = 0; i < str.length; i++ ) {
        crc = (crc >>> 8) ^ crcTable[(crc ^ str.charCodeAt(i)) & 0xFF];
    }

    return (crc ^ (-1)) >>> 0;
};

function pseudo_random(n) {
    return crc32('' + userId + n);
}